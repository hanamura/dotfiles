#!/usr/bin/env bash

# References:
# - https://github.com/mathiasbynens/dotfiles
#
# > Copyright Mathias Bynens <http://mathiasbynens.be/>
# >
# > Permission is hereby granted, free of charge, to any person obtaining
# > a copy of this software and associated documentation files (the
# > "Software"), to deal in the Software without restriction, including
# > without limitation the rights to use, copy, modify, merge, publish,
# > distribute, sublicense, and/or sell copies of the Software, and to
# > permit persons to whom the Software is furnished to do so, subject to
# > the following conditions:
# >
# > The above copyright notice and this permission notice shall be
# > included in all copies or substantial portions of the Software.
# >
# > THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
# > EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
# > MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
# > NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
# > LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
# > OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
# > WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

# start
# =====

# Ask for the administrator password upfront

sudo -v

# Keep-alive: update existing `sudo` time stamp until `.osx` has finished

while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

# energy settings
# ===============

# Set standby delay to 24 hours (default is 1 hour)

sudo pmset -a standbydelay 86400

# sleep timers - never sleep - charger

sudo pmset -c sleep 0
sudo pmset -c disksleep 0
sudo pmset -c displaysleep 0

# sleep timers - sleep in 45 minutes - battery

sudo pmset -b sleep 45
sudo pmset -b disksleep 45
sudo pmset -b displaysleep 45

# boot
# ====

# Disable the sound effects on boot

sudo nvram SystemAudioVolume=" "

# finder
# ======

# show hidden files

defaults write com.apple.finder AppleShowAllFiles -bool true

# hide icons on desktop

defaults write com.apple.finder CreateDesktop -bool false

# show file extensions

defaults write NSGlobalDomain AppleShowAllExtensions -bool true

# Avoid creating .DS_Store files on network volumes

defaults write com.apple.desktopservices DSDontWriteNetworkStores -bool true

# Use list view in all Finder windows by default
# Four-letter codes for the other view modes: `icnv`, `clmv`, `Flwv`

defaults write com.apple.finder FXPreferredViewStyle -string "Nlsv"

# dock, mission control, spaces
# =============================

# Set the icon size of Dock items to 36 pixels

defaults write com.apple.dock tilesize -int 36

# Speed up Mission Control animations

defaults write com.apple.dock expose-animation-duration -float 0.1

# Don’t automatically rearrange Spaces based on most recent use

defaults write com.apple.dock mru-spaces -bool false

# Remove the auto-hiding Dock delay

defaults write com.apple.dock autohide-delay -float 0

# Remove the animation when hiding/showing the Dock

defaults write com.apple.dock autohide-time-modifier -float 0.2

# Automatically hide and show the Dock

defaults write com.apple.dock autohide -bool true

# Make Dock icons of hidden applications translucent

defaults write com.apple.dock showhidden -bool true

# Hot corners
# Possible values:
#  0: no-op
#  2: Mission Control
#  3: Show application windows
#  4: Desktop
#  5: Start screen saver
#  6: Disable screen saver
#  7: Dashboard
# 10: Put display to sleep
# 11: Launchpad
# 12: Notification Center

# Top left screen corner → no-op

defaults write com.apple.dock wvous-tl-corner -int 0
defaults write com.apple.dock wvous-tl-modifier -int 0

# Top right screen corner → no-op

defaults write com.apple.dock wvous-tr-corner -int 0
defaults write com.apple.dock wvous-tr-modifier -int 0

# Bottom left screen corner → no-op

defaults write com.apple.dock wvous-bl-corner -int 0
defaults write com.apple.dock wvous-bl-modifier -int 0

# Bottom right screen corner → no-op

defaults write com.apple.dock wvous-br-corner -int 0
defaults write com.apple.dock wvous-br-modifier -int 0

# general ui
# ==========

# Increase window resize speed for Cocoa applications

defaults write NSGlobalDomain NSWindowResizeTime -float 0.001

# input device
# ============

# Trackpad: enable tap to click for this user and for the login screen

defaults write com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking -bool true
defaults -currentHost write NSGlobalDomain com.apple.mouse.tapBehavior -int 1
defaults write NSGlobalDomain com.apple.mouse.tapBehavior -int 1

# iterm2
# ======

# Don’t display the annoying prompt when quitting iTerm

defaults write com.googlecode.iterm2 PromptOnQuit -bool false

# time machine
# ============

# Prevent Time Machine from prompting to use new hard drives as backup volume

defaults write com.apple.TimeMachine DoNotOfferNewDisksForBackup -bool true
